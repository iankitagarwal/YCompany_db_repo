// Use DBML to define your database structure
// Docs: https://dbml.dbdiagram.io/docs

Table users {
  user_id integer [primary key]
  username varchar
  is_internal_user boolean
  email varchar
  mobile_number varchar
  address1 varchar
  address2 varchar
  city_id varchar
  state_id integer
  country_id integer
  zipcode1 varchar
  zipcode2 varchar 
  active boolean
  created_at timestamp
  updated_at timestamp
  created_by varchar
  updated_by varchar
}

Table vehicles{
  vehicle_id integer [primary key]
  user_id integer [ref: > users.user_id]
  vehicle_type_id integer [unique, ref: - vehicle_type.vehicle_type_id]
  registration_number varchar
  registration_date date
  owner_name varchar
  engine_type_id integer [unique, ref: - engine_type.engine_type_id]
  owner_type_id integer [unique, ref: - owner_type.owner_type_id]
} 

Table vehicle_type{
  vehicle_type_id integer
  type varchar
}

Table engine_type{
  engine_type_id integer
  type varchar
}

Table owner_type{
  owner_type_id integer
  type varchar
}

Table roles {
  role_id integer [primary key]
  rolename varchar
}

Table user_role_mapping{
  user_role_mapping_id integer
  user_id integer
  role_id integer
  created_at timestamp
  updated_at timestamp
  created_by varchar
  updated_by varchar
}

Table user_policies{
  user_policy_id integer
  user_id integer [ref: > users.user_id]
  policy_id integer
  start_date date
  end_date date
  last_activation_date date
  is_renewed boolean
  active boolean
  nominee_detail_id
}

Table country{
  country_id integer
  country_code varchar
  country_name varchar
  created_at timestamp
}

Table state{
  state_id integer
  state_code varchar
  state_name varchar
  country_id integer
  created_at timestamp
}

Table city{
  city_id integer
  city_code varchar
  city_name varchar
  state_id integer
  country_id integer
  created_at timestamp
}


Table policy{
  policy_id integer
  policy_name varchar
  country_id integer
  state_id integer
  policy_duration varchar
  active boolean
  policy_type_id integer
  created_at timestamp
  updated_at timestamp
  created_by varchar
  updated_by varchar
}

Table policy_types{
  policy_type_id integer
  policy_type_name varchar
}

Table policy_document_links {
  policy_document_links_id integer
  policy_id integer
  document_link varchar
}
Table workshop{
  workshop_id integer
  workshop_name varchar
  address1 varchar
  address2 varchar
  country_id integer
  state_id integer
  city_id integer
  is_partner_workshop boolean
}


Ref: policy.policy_id < country.country_id
Ref: policy.policy_id < state.state_id
Ref: policy.policy_id < city.city_id
Ref: policy.policy_id > policy_types.policy_type_id
Ref: policy.policy_id < policy_document_links.policy_document_links_id

Ref: country.country_id > state.state_id
Ref: state.state_id > city.city_id
